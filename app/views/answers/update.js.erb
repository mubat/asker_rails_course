<% answer_selector = "answer-#{answer.id}" %>

<% if answer.is_best %>
  window.oldBestAnswer = $('.answer-best');
  
  if(oldBestAnswer.attr('id') != '<%= answer_selector %>') {
    oldBestAnswer.find('.best-mark').text('');
    oldBestAnswer.find('.set-best-answer-link').removeClass('hidden');
    oldBestAnswer.removeClass('answer-best');

  }
<% end %>

<% if answer.errors.present? %>
  $('#<%= answer_selector %> .answer-errors').html('<%= render 'shared/errors', resource: answer %>');
<% else %>
  $('#<%= answer_selector %>').html('<%= j render @answer %>');
<% end %>

$('.notice,.alert').text('');
<% flash.each do |level, message| %>
  $('.<%= level %>').append('<%= message %>')
<% end %>